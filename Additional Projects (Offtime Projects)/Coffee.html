

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</head>
<body>
<div class="container row justify-content-center mx-auto">
    <h1 class="text-center col-12 mx-auto p-5">Coffee!</h1>
    <form class="col mx-auto p-3">
        <h3>Add your own coffee!</h3>
        <label for="input-roast"></label>
        <p>Select a type of roast: </p>
        <select id="input-roast">
            <option>light</option>
            <option>medium</option>
            <option>dark</option>
        </select>
        <p class="pt-3">Now name your brew!</p>
        <input id="input-name" type="text" placeholder="Coffee Name">
        <input id="input-submit" type="button" value="Add Coffee" />
    </form>
    <form class="col mx-auto p-3">
        <h3 class="pb-3">Search for a type of coffee</h3>
        <label for="roast-selection"></label>
        <select id="roast-selection">
            <option>all</option>
            <option>light</option>
            <option>medium</option>
            <option>dark</option>
        </select>
        <input id="submit" type="submit" />
        <input id="searchBox" type="text" placeholder="Search">
    </form>
    <h3 class="text-center col-12 py-3"><--- LOOK AT ALL THE CAFFEINE ---></h3>

    <div id="coffees" class="container row mx-auto p-3">
        <!--
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>NAME</th>
                    <th>ROAST</th>
                </tr>
            </thead>
            <tbody id="coffees"></tbody>
        </table>
        -->
    </div>

    <script src="main.js"></script>
</div>
</body>
</html>


<script>


    "use strict";

    // COFFEE - TABLE CONTENT //

    var coffees = [

        {id: 1, name: 'Light City', roast: 'light'},
        {id: 2, name: 'Half City', roast: 'light'},
        {id: 3, name: 'Cinnamon', roast: 'light'},
        {id: 4, name: 'City', roast: 'medium'},
        {id: 5, name: 'American', roast: 'medium'},
        {id: 6, name: 'Breakfast', roast: 'medium'},
        {id: 7, name: 'High', roast: 'dark'},
        {id: 8, name: 'Continental', roast: 'dark'},
        {id: 9, name: 'New Orleans', roast: 'dark'},
        {id: 10, name: 'European', roast: 'dark'},
        {id: 11, name: 'Espresso', roast: 'dark'},
        {id: 12, name: 'Viennese', roast: 'dark'},
        {id: 13, name: 'Italian', roast: 'dark'},
        {id: 14, name: 'French', roast: 'dark'},
    ];

    var inputName = document.querySelector('#input-name');
    var inputRoast = document.querySelector('#input-roast');
    var addCoffeeButton = document.querySelector('#input-submit');
    addCoffeeButton.addEventListener('click', addCoffees);

    function addCoffees (input) {
        var addID = coffees.length+1;
        var addName = inputName.value.toString();
        var addRoast = inputRoast.value.toString();
        input = {id: addID, name: addName, roast: addRoast};
        coffees.push(input);
        console.log(coffees);
        tbody.innerHTML = renderCoffees(coffees);

    }

    // PUTS COFFEE DATA INTO TABLE WITHIN JS //
    function renderCoffee(coffee) {

        var html = '<div class="coffee d-block col-4 mx-auto p-auto">';
        // html += '<span>' + coffee.id + '</span>';
        html += '<h1>' + coffee.name + '</h1>';
        html += '<p>' + coffee.roast + '</p>';
        html += '</div>';

        return html;
    }

    // CONVERTS ABOVE TABLE DATA INTO STRINGS //
    function renderCoffees(coffees) {
        var html = '';
        for(var i = 0; i < coffees.length; i++) {
            html += renderCoffee(coffees[i]);
        }
        return html;
    }

    // "EXPORTS" DATA INTO TABLE OF HTML //
    var tbody = document.querySelector('#coffees');
    tbody.innerHTML = renderCoffees(coffees);

    // SUBMIT SECTION //
    var roastSelection = document.querySelector('#roast-selection');

    function updateCoffees(e) {
        e.preventDefault(); // don't submit the form, we just want to update the data
        var selectedRoast = roastSelection.value;
        var filteredCoffees = [];
        coffees.forEach(function(coffee) {
            if (coffee.roast === selectedRoast) {
                filteredCoffees.push(coffee);
            } else if(roastSelection.value === 'all'){
                filteredCoffees.push(coffee);
            }
        });
        tbody.innerHTML = renderCoffees(filteredCoffees);
    }
    // LIVE SEARCH FUNCTION //
    function searchCoffees() {
        var searchRoast = searchBox.value.toUpperCase();
        var filteredCoffees = [];
        console.log(searchRoast);
        coffees.forEach(function(coffee) {
            if (coffee.name.toUpperCase().includes(searchRoast)) {
                filteredCoffees.push(coffee);
                console.log(filteredCoffees);
            }
        });
        tbody.innerHTML = renderCoffees(filteredCoffees);
    }





    var searchBox = document.querySelector('#searchBox');
    searchBox.addEventListener('keyup', searchCoffees);

    var submitButton = document.querySelector('#submit');
    submitButton.addEventListener('click', updateCoffees);




</script>
</body>
</html>