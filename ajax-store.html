<!DOCTYPE html>
<html>
<head>
    <title>Online Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<style>
    *{
        box-sizing: border-box;
    }
    body{
        height: 100vh;
    }
    h1{
        text-align: center;
    }


</style>
<body>

<h1>My Tool Store</h1>

<table id="products" class="table table-striped">
    <thead>
        <tr class="text-primary">
            <th>Title</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Categories</th>
        </tr>
    </thead>
    <tbody id="insertProducts"></tbody>
</table>
<button type="button" id="refresh">Refresh</button>

<script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
<script>
(function() {
    "use strict";
    // TODO: Create an AJAX GET request for the file under data/inventory.json
    function loadList() {
        let html = '';
        $.ajax("data/inventory.json").done(function (data) {
            console.log(data);
            for (let i = 0; i <= data.length - 1; i++) {
                html += '<tr>';
                html += '<th>' + data[i].title + '</th>';
                html += '<th>' + data[i].quantity + '</th>';
                html += '<th>' + data[i].price + '</th>';
                html += '<th>' + data[i].categories.join(', ') + '</th>';
            }
            $('#insertProducts').html(html);
        })
    }
        $(document).ready(function(){
            loadList();
            $('#refresh').click(function(){
                html = '';
                $('#insertProducts').html(html);
                loadList();
            })
        })

    // TODO: Take the data from inventory.json and append it to the products table

    // fetch("data/inventory.json")
    //     .then(function(response){
    //         return response.json();
    //     })
    //     .then(function(products){
    //
    //         let showTable = document.getElementById('insertProducts');
    //         let out = "";
    //         for(let product of products){
    //             // language=HTML
    //             out += `
    //             <tr>
    //                 <td>${products.title}</td>
    //                 <td>${products.quantity}</td>
    //                 <td>${products.price}</td>
    //                 <td>${products.category}</td>
    //             </tr>
    //             `;
    //         }
    //         showTable.innerHTML = out;
    //     })
    // //
    // let showTable = document.querySelector('#insertProducts');
    //
    // console.log(showTable);
    // let row="";
    // $.ajax({
    //     url:"data/inventory.json",
    //     data: "{}",
    //     dataType: "json",
    //     success: function()
    // // })
    // $.ajax({
    //     url: 'data/inventory.json',
    //     dataType: 'json',
    //     success: function(data){
    //         console.log(data);
    //         let showTable = '';
    //         $.each(function(index, value){
    //             console.log(value);
    //         })
    //
    //     }
    // })
    //       HINT: Your data should come back as a JSON object; use console.log() to inspect
    //             its contents and fields
    //       HINT: You will want to target #insertProducts for your new HTML elements
})();
</script>

</body>
</html>
